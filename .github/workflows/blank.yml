name: test_packages

on:
  workflow_dispatch:

## global configuration
env:
  GITHUB_WORKFLOW_RUN_ID: "${{ github.run_id }}.${{ github.run_number }}" ## used for container image tag

## concurreny lock (optional)
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}

jobs:
  build:
    name: build
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v3
      - name: build-docker
        uses: ./.github/actions/build-docker
        with:
          sbx: ${{ secrets.MB_DTOS1_AZURE_DEV }}
          context: './'
          push: false
          imageName: "tmp"
          acrName: csgcrewdtos1
          imageTag: ${{ env.GITHUB_WORKFLOW_RUN_ID }}
          user: ${{ secrets.USER }}
          apm: ${{ secrets.APM }}
          githubToken: ${{ secrets.GITHUB_TOKEN }}
          githubActor: ${{ secrets.GITHUB_ACTOR }}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
